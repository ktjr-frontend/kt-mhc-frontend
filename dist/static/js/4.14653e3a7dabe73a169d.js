webpackJsonp([4],{"+JeH":function(e,t,s){s("G4xA");var i=s("VU/8")(s("vuzR"),s("MIHS"),"data-v-55410465",null);e.exports=i.exports},"1+TI":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Xxa5"),a=s.n(i),c=s("exGp"),r=s.n(c),n=s("nWjG");t.default={mixins:[n.a],validators:{"model.buyer":function(e){return this.validate(e).required("请选项下游提车公司")}},methods:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.vehicles=e,this.checkedCar=t},submit:function(){var e=this;return r()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validate();case 2:s=t.sent,s?(e.$router.back(),e.$emit("popup-confirmed",e.model)):e.$toast(e.validation.firstError(),"error");case 4:case"end":return t.stop()}},t,e)}))()}},data:function(){return{buyerList:[{label:"下游公司一",value:"1"},{label:"下游公司二",value:"2"},{label:"下游公司三",value:"3"}],vehicles:[],checkedCar:[],model:{buyer:""}}}}},"2DtX":function(e,t,s){t=e.exports=s("FZ+f")(),t.push([e.i,'.iconfont[data-v-55410465]{width:30px;text-align:center}.header-sub[data-v-55410465]{min-height:45px;line-height:45px;background:#fff}.search-help[data-v-55410465]{padding-top:100px;text-align:center}.search-help img[data-v-55410465]{width:60vw}.select-value .value[data-v-55410465]{position:relative;display:inline-block}.select-value .value.open[data-v-55410465]:after{-ms-transform:rotate(180deg);transform:rotate(180deg);top:16px}.select-value .value[data-v-55410465]:after{content:"";position:absolute;border-width:4px;top:20px;right:-15px;height:0;width:0;border-color:currentColor transparent transparent;border-style:solid}.select-repository[data-v-55410465]{text-align:center;position:relative;font-size:15px;z-index:999}.select-repository ul[data-v-55410465]{background:#fff}.select-repository ul li[data-v-55410465]{padding:0 10px}.select-repository ul li[data-v-55410465]:active{background-color:rgba(0,0,0,.02)}.select-repository .select-list[data-v-55410465]{position:absolute;left:0;top:45px;height:100vh;background:rgba(0,0,0,.2);right:0;text-align:left;z-index:998}.custom-content[data-v-55410465]{padding:10px 0;line-height:1.5em}.custom-content p[data-v-55410465]{white-space:normal}.body[data-v-55410465]{padding-top:10px}',""])},EW67:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("+JeH"),a=s.n(i),c=s("qXmj"),r=s.n(c),n=s("M4fF");s.n(n);t.default={components:{VehicleList:a.a,ChooseBuyer:r.a},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.vehicleList.init()})},methods:{backButtonAction:function(){this.chooseBuyerVisible?this.chooseBuyerVisible=!1:this.routerBack()},vehicleConfirm:function(e){var t=e.vehicles,i=e.checkedCar;console.log(i);var a=s.i(n.filter)(t,function(e){return s.i(n.some)(e.children,function(e){return e.checked})});this.$refs.chooseBuyer.init(a,i),this.chooseBuyerVisible=!0},buyerConfirm:function(e){},closeVehicleList:function(){this.$router.back()}},data:function(){return{chooseBuyerVisible:!1}}}},G4xA:function(e,t,s){var i=s("2DtX");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s("rjj0")("482c3ae1",i,!0)},HgVS:function(e,t,s){var i=s("VU/8")(s("EW67"),s("O0cb"),null,null);e.exports=i.exports},Jpvm:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"choose-buyer-form",class:e.$root.$children[0].headerShow?this.$style.hasHeader:""},[s("form",[s("section",[s("div",{staticClass:"fields"},[s("kt-select",{staticClass:"has-border",attrs:{"cell-class":["em-cell"],options:e.buyerList,state:e.getFieldState("model.buyer")},nativeOn:{click:function(t){e.showFieldError(t,"model.buyer")}},model:{value:e.model.buyer,callback:function(t){e.$set(e.model,"buyer",t)},expression:"model.buyer"}},[s("span",{attrs:{slot:"label"},slot:"label"},[e._v("下游买家")])])],1)]),s("section",{staticClass:"mt10"},[s("div",{staticClass:"fields"},[s("mt-cell",{staticClass:"title-cell"},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("本次提车车辆")]),s("span",[e._v("共 "),s("em",[e._v(e._s(e.checkedCar.length))]),e._v(" 辆")])]),e._l(e.vehicles,function(t){return s("mt-cell",{key:t.id,staticClass:"has-hint"},[s("div",{staticClass:"wrap-title",attrs:{slot:"title"},slot:"title"},[s("p",[e._v(e._s(t.model))]),e._l(t.children,function(t){return s("p",{key:t.frameNo,staticClass:"title-hint"},[s("span",[e._v("车架号："+e._s(t.frameNo)+" "+e._s(t.appearTrim))])])})],2)])})],2)])]),s("div",{staticClass:"fixed-footer-placeholder"}),s("footer",{staticClass:"fixed-footer"},[s("div",{staticClass:"tab-item flex1 tab-btn"},[s("button",{on:{click:e.submit}},[e._v("确定转移物权")])])])])},staticRenderFns:[]}},MIHS:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"search-vehicles"},[e.mtHeaderVisible?s("mt-header",{ref:"header",attrs:{title:"车辆信息"}},[s("div",{attrs:{slot:"left"},slot:"left"},[s("i",{staticClass:"p10 iconfont icon-guanbi",on:{click:function(t){t.preventDefault(),e.close(t)}}})])]):e._e(),s("section",{staticClass:"body overflow-scroll"},[!e.searchResult.length&&e.filter.price?s("div",{staticClass:"no-data"},[s("i",{staticClass:"iconfont icon-car"}),s("p",[e._v("此条件下没有结果")])]):e._e(),e.searchResult.length?s("div",{staticClass:"search-result"},[e._l(e.searchResult,function(t){return[s("mt-cell",{key:t.id,staticClass:"ui-border-b",attrs:{title:"empty"}},[s("div",{staticClass:"custom-title flex flex-start",attrs:{slot:"title"},slot:"title"},[s("kt-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],staticClass:"mr10",on:{change:function(s){e.syncChildStatus(t)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"r.checked"}}),s("div",{staticClass:"custom-content"},[s("p",[e._v(e._s(t.model))]),s("small",{staticClass:"note"},[e._v("共 "+e._s(t.children.length)+" 辆")])])],1)]),s("section",e._l(t.children,function(i){return s("mt-cell",{key:i.vin,staticClass:"no-border",attrs:{title:"empty"}},[s("div",{staticClass:"custom-title flex flex-start",attrs:{slot:"title"},slot:"title"},[s("kt-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],staticClass:"mr10",on:{change:function(s){e.syncParentStatus(t,i)}},model:{value:i.checked,callback:function(t){e.$set(i,"checked",t)},expression:"sub.checked"}}),s("div",{staticClass:"custom-content"},[s("p",[e._v("车架号："+e._s(i.vin))]),s("small",{staticClass:"note"},[e._v("外观内饰："+e._s(i.appearTrim))])])],1)])}))]})],2):e._e()]),s("div",{staticClass:"fixed-footer-placeholder"}),s("footer",{staticClass:"fixed-footer flex"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],staticClass:"flex-item flex-start pl10"},[s("kt-checkbox",{attrs:{value:e.checked},on:{input:e.checkAll}},[s("span",{staticClass:"pl10"},[e._v("全选")]),s("span",{staticClass:"pl10"},[e._v("已选 [ "+e._s(e.checkedCar.length)+" ]")])])],1),"interestTransfer"!==e.from?s("div",{staticClass:"tab-item",style:{width:e.readonly?"100%":"80px"}},[e.readonly?s("button",{on:{click:function(t){t.preventDefault(),e.readonly=!1}}},[e._v("申请提车")]):s("button",{on:{click:function(t){t.preventDefault(),e.submit(t)}}},[e._v("提交")])]):[s("div",{staticClass:"tab-item",staticStyle:{width:"50px"}},[s("button",{staticClass:"simple",on:{click:function(t){t.preventDefault(),e.close(t)}}},[e._v("取消")])]),s("div",{staticClass:"tab-item",staticStyle:{"min-width":"80px"}},[s("button",{on:{click:e.submit}},[e._v("转移物权")])])]],2)],1)},staticRenderFns:[]}},O0cb:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"interest-transfer"},[s("vehicle-list",{ref:"vehicleList",attrs:{from:"interestTransfer",close:e.closeVehicleList},on:{"popup-confirmed":e.vehicleConfirm}}),s("mt-popup",{staticClass:"popup-box",attrs:{position:"right"},model:{value:e.chooseBuyerVisible,callback:function(t){e.chooseBuyerVisible=t},expression:"chooseBuyerVisible"}},[s("choose-buyer",{ref:"chooseBuyer",on:{"popup-confirmed":e.buyerConfirm}})],1)],1)},staticRenderFns:[]}},coUs:function(e,t,s){var i=s("tCpm");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s("rjj0")("675df3d4",i,!0)},qWu3:function(e,t,s){e.exports=s.p+"static/img/33.aef6163.jpg"},qXmj:function(e,t,s){var i={};i.$style=s("coUs");var a=s("VU/8")(s("1+TI"),s("Jpvm"),null,i);e.exports=a.exports},tCpm:function(e,t,s){t=e.exports=s("FZ+f")(),t.push([e.i,".src-views-pickup-ChooseBuyer---has-header---26waD_0{margin-top:40px}",""]),t.locals={"has-header":"src-views-pickup-ChooseBuyer---has-header---26waD_0",hasHeader:"src-views-pickup-ChooseBuyer---has-header---26waD_0"}},vuzR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Xxa5"),a=s.n(i),c=s("exGp"),r=s.n(c),n=s("3dbI"),o=s("M4fF"),l=(s.n(o),{33:s("qWu3")});t.default={props:{mtHeaderVisible:!0,close:Function,from:String},methods:{clearSearch:function(){this.filter.price="",this.search()},searchInputChange:function(e){this.filter.price=e.target.value,this.search()},init:function(e){this.currentCheckedCar=e,"mine"===this.from&&(this.readonly=!0),this.search()},syncGlobalStatus:function(){this.checked=s.i(o.every)(this.searchResult,function(e){return e.checked})},syncParentStatus:function(e,t){e.checked=s.i(o.every)(e.children,function(e){return e.checked}),this.syncGlobalStatus()},syncChildStatus:function(e){s.i(o.each)(e.children,function(t){t.checked=e.checked}),this.syncGlobalStatus()},checkAll:function(e){var t=this;this.checked=e,s.i(o.each)(this.searchResult,function(e){e.checked=t.checked,s.i(o.each)(e.children,function(e){e.checked=t.checked})})},search:s.i(o.debounce)(r()(a.a.mark(function e(){var t,i=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.get(this.pruneParams(this.filter)).then(function(e){return e.json()}).catch(function(e){throw i.loading=!1,e});case 2:t=e.sent,s.i(o.each)(t.data.data,function(e){e.icon=l[e.iconId]}),this.searchResult=t.data.data||[];case 5:case"end":return e.stop()}},e,this)})),500),submit:function(){if(!this.checkedCar.length)return void this.$toast("请选择车辆","error");this.$emit("popup-confirmed",{vehicles:this.searchResult,checkedCar:this.checkedCar})}},computed:{checkedCar:function(){return s.i(o.chain)(this.searchResult).map(function(e){return e.children}).flatten().filter(function(e){return e.checked}).value()},selectRepositoryLabel:function(){var e=this;return(s.i(o.find)(this.repositoryList,function(t){return t.value===e.selectRepository})||{}).label||""}},data:function(){return{currentCheckedCar:[],readonly:!1,checked:[],repositoryListVisible:!1,repositoryList:[{label:"测试1号库",value:"1"},{label:"测试2号库",value:"2"}],selectRepository:"1",searchResult:[],filter:{vin:""}}}}}});